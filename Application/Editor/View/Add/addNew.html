<include file="Public/header" />

<include file="Public/nav" />
	<!--start-list-->
		<div class="container">
			<div class="row">
				<div class="col-md-8" style="margin-top:10px;">
					<form class="form-horizontal" action="{:U('editor/add/saveNew')}" method="post">
						<div class="form-group">
					    	<label for="selectCategory" class="col-sm-2 control-label">类别</label>
					    	<div class="col-sm-3">
					      		<select class="form-control" name="category" id="selectCategory">
					      		<foreach name="category" item="vo" >
									<option value="{$vo.id}">{$vo.name}</option>
								</foreach>
								</select>
					    	</div>
					  	</div>
					  	<div class="form-group">
					    	<label for="selectNeworold" class="col-sm-2 control-label">新旧</label>
					    	<div class="col-sm-3">
					      		<select class="form-control" name="neworold" id="selectNeworold">
								  <foreach name="neworold" item="vo" >
									<option value="{$key}">{$vo.name}</option>
								  </foreach>
								</select>
					    	</div>
					  	</div>
					  	<div class="form-group">
					    	<label for="inputPrice" class="col-sm-2 control-label">价格</label>
					    	<div class="col-sm-10">
					      		<input type="text" class="form-control" id="inputPrice" name="price" placeholder="Price">
					    	</div>
					  	</div>
					  	<div class="form-group">
					    	<label for="inputImg" class="col-sm-2 control-label">图片</label>
					    	<div class="col-sm-4">
					    		<div id="fileList" class="uploader-list"></div>
					      		<div id="picker">上传主图</div>
					      		<input type="hidden" name="img" id="inputImg">
					    	</div>
					  	</div>
					  	<div class="form-group">
					    	<label for="inputImg" class="col-sm-2 control-label">多图上传</label>
					    	<div class="col-sm-4">
					    		<div id="fileList" class="uploader-list"></div>
					      		<div id="upload_images">上传多图</div>
					      		<input type="hidden" name="img" id="inputImg">
					    	</div>
					  	</div>
					  	<div class="form-group">
					    	<label for="inputTitle" class="col-sm-2 control-label">标题</label>
					    	<div class="col-sm-10">
					      		<input type="text" class="form-control" id="inputTitle" name="title" placeholder="Title">
					    	</div>
					  	</div>
					  	<div class="form-group">
					    	<label for="inputKeyword" class="col-sm-2 control-label">关键字</label>
					    	<div class="col-sm-10">
					      		<input type="text" class="form-control" id="inputKeyword" name="keyword" placeholder="Keyword">
					    	</div>
					  	</div>
					  	<div class="form-group">
					    	<label for="inputDescription" class="col-sm-2 control-label">描述</label>
					    	<div class="col-sm-10">
					      		<input type="text" class="form-control" id="inputDescription" name="description" placeholder="Description">
					    	</div>
					  	</div>
					  	<div class="form-group">
					    	<label for="inputEmail3" class="col-sm-2 control-label">商品详情</label>
					    	<div class="col-sm-10">
					      		<textarea id="info" name="info" data-provider="markdown" rows="12" class="form-control"></textarea>
					    	</div>
					  	</div>
					  	<div class="form-group">
					    	<label for="inputname" class="col-sm-2 control-label">联系人</label>
					    	<div class="col-sm-10">
					      		<input type="text" class="form-control" id="inputname" name="yourname" placeholder="Your Name">
					    	</div>
					  	</div>
					  	<div class="form-group">
					    	<label for="inputPhone" class="col-sm-2 control-label">电话</label>
					    	<div class="col-sm-10">
					      		<input type="text" class="form-control" id="inputPhone" name="phone" placeholder="Phone">
					    	</div>
					  	</div>
					  	<div class="form-group">
							<div class="col-sm-offset-2 col-sm-10">
								<button type="submit" class="btn btn-default">提交</button>
							</div>
						</div>
					 
					</form>
				</div>
			</div>
		</div>
	<!--end-list-->

<link rel="stylesheet" type="text/css" href="__PUBLIC__/vendors/webuploader/webuploader.css">
<script type="text/javascript" src="__PUBLIC__/vendors/webuploader/webuploader.min.js"></script>

<script type="text/javascript">


//初始化 uploader
var uploader = WebUploader.create({
    auto: true,
    swf: '__PUBLIC__/vendors/webuploader/Uploader.swf',
    server: '{:U('editor/add/upload')}',
    pick: '#picker',
    accept: {
        title: 'Images',
        extensions: 'gif,jpg,jpeg,bmp,png',
        mimeTypes: 'image/*'
    },
    resize: false
});
uploader.on( 'fileQueued', function( file ) {
    var $li = $(
            '<div id="' + file.id + '" class="file-item thumbnail">' +
                '<img>' +
                '<div class="info">' + file.name + '</div>' +
            '</div>'
            ),
        $img = $li.find('img');


    // $list为容器jQuery实例
    $('#fileList').empty().append( $li );
    // 创建缩略图
    // 如果为非图片文件，可以不用调用此方法。
    // thumbnailWidth x thumbnailHeight 为 100 x 100
    uploader.makeThumb( file, function( error, src ) {
        if ( error ) {
            $img.replaceWith('<span>不能预览</span>');
            return;
        }

        $img.attr( 'src', src );
    }, 100, 100 );
});
uploader.on( 'uploadSuccess', function( file , data) {
	$('#inputImg').val(data.src);
    $( '#'+file.id ).addClass('upload-state-done');
});

//初始化 uploader
var uploader = WebUploader.create({
    auto: true,
    swf: '__PUBLIC__/vendors/webuploader/Uploader.swf',
    server: '{:U('editor/add/upload')}',
    pick: '#upload_images',
    accept: {
        title: 'Images',
        extensions: 'gif,jpg,jpeg,bmp,png',
        mimeTypes: 'image/*'
    },
    resize: false
});
uploader.on( 'fileQueued', function( file ) {
    var $li = $(
            '<div id="' + file.id + '" class="file-item thumbnail">' +
                '<img>' +
                '<div class="info">' + file.name + '</div>' +
            '</div>'
            ),
        $img = $li.find('img');


    // $list为容器jQuery实例
    $('#fileList').empty().append( $li );
    // 创建缩略图
    // 如果为非图片文件，可以不用调用此方法。
    // thumbnailWidth x thumbnailHeight 为 100 x 100
    uploader.makeThumb( file, function( error, src ) {
        if ( error ) {
            $img.replaceWith('<span>不能预览</span>');
            return;
        }

        $img.attr( 'src', src );
    }, 100, 100 );
});
uploader.on( 'uploadSuccess', function( file , data) {
	console.log(file);console.log(data);
	$('#inputImg').val(data.src);
    $( '#'+file.id ).addClass('upload-state-done');
});

</script>

<include file="Public/footer" />